Start with:
 rake test:units TEST=unit/lib/content_block_test.rb

    A new connector is not being created when a block is updated.

38 Failures in Unit

Open Issues
===========
* Not sure Publishing and Versioning should be split up. They are really intertwined in practice.
* No route found for /  (Neither root nor match "/" seem to work)
* Need to figure out how routes from gems can be embedded (The content router doesn't work via a gem right now)
* Pages do not render their status icon in the sitemap.
* link_to_function has been removed. Check All and uncheck all are currently broken (See ApplicationHelper)
* No such method 'callback' for blocks during saving. (Versioning.save line #121)
* Attachments throw errors (uninitialized constant ActionController::UploadedTempfile)
* Saving a block with unchanged value shouldn't create additional versions (rake test:units TEST=unit/lib/content_block_test.rb)
* Deleting blocks doesn't work. (Might actually be problems with queries)
* Altering the uploaded file may not change the name of the file. (Broken test or broken feature?)
* require_javascript_include - Tests are broken (probably due to changes to rails internals) 
* save! is broken (Maybe)

CMS Behavior Dependencies
================
* Connecting -> Versioning (.draft)
* Versioning -> Publishing (.publish)

To Do List
==========
0. Install jeweler for 1.9.1 to get rid of warnings. (I commented out Jeweler for now)
1. Build the gem and test it against a new rails 3 project.
2. Verify it works in 1.8.7
3. Determine if both Rails 2 and 3 can be supported in the same gem.


Making save work
================
Reworked save to use normal callback behavior, rather than overriding save_with_validations.

Known Issues:
- Destroying is throwing errors.


ActiveRecord alias chain- Here is the order that methods get called.
--
save
  save_with_transactions
  save_with_dirty
  save_with_validations
  AR::Base.save (save_without_validations)
  AR::Base.create_or_update_with_callbacks

  
AR::Base - Defines a 'save' method with no params
AR::Validations - alias save to a save_with_validations (which takes params) 
ActiveRecord Object has:
- save_with_validations(options)
- save_without_validation() - (Original save)


Items Completed
===============
1. Hacked some helpers to not return unsafe strings. This needs to be really fixed.
2. Upgraded the 'stock' Rails files of BrowserCMS to use Rails 3.
3. Upgraded factory_girl to use a Rails 3/git based version
4. Added bundler configuration (this will need to be documented).
5. Sitemap folders now render correctly (fixed raw/h strings issue). Buttons too.
6. Removed calls to 'after_validation_on_update' in favor of 'after_validation' with a check for new_record?
7. SITE_DOMAIN was a constant can't be found since there is no more global namespace. (Read up on how to add new configuration to Rails apps via configuration)
  (SITE_DOMAIN is fixed, but might not work correctly when new BrowserCMS projects are generated)
8. Rewrote versioning to override the correct method for handling callbacks.
9. Catchall route used to split path into an array, then the content controller would reassemble it. I have reversed this procedure.

Other Notes
==========
1. Some versions of 1.8.7-p248 and later have random Segmentation Fault/Bus issues with databases. See
    * http://busyprogrammer.wordpress.com/tag/bus-error/
    * Segmentation Fault - http://busyprogrammer.wordpress.com/tag/bus-error/ Only 1.8.7 p249